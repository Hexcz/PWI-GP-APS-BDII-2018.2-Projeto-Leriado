<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<p:panel id="toggleable" header="Chat" closable="true" closeSpeed="500"
	widgetVar="panel" style="margin-bottom:20px">
	<div id="toggleableMsgs">
		<p:dataList hidden="true" var="itemMsg" value="#{mensagemBean.msgs}"
			id="list" type="unordered">
			<b>#{itemMsg.nomeRemetente}: </b>
			<h:outputText value="#{itemMsg.conteudo}" />
		<script>
			$('#toggleableMsgs').scrollTop($('#toggleableMsgs')[0].scrollHeight);
		</script>
		</p:dataList>
	</div>
	<h:form prependId="false">
		<p:inputText type="hidden" id="idAmigoSelecionado"
			value="#{mensagemBean.msg.idDestinatario}"></p:inputText>
		<p:inputText value="#{mensagemBean.msg.conteudo}"></p:inputText>
		<p:commandButton action="#{mensagemBean.criarMensagem}" value="enviar" />
		<p:poll interval="1" listener="#{mensagemBean.listarMensagens}"
			update="list" />
	</h:form>
</p:panel>
</html>